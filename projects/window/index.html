<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.13.0"/><style data-href="/cv/styles.99c8f61575cfd6ceb4e7.css" data-identity="gatsby-global-css">@import url(https://api.fontshare.com/v2/css?f[]=general-sans@200,300,400,700&f[]=bespoke-serif@400,700,800,300,500&display=swap);@import url(https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap);.noPage-module--noPage--6da61 h2{text-wrap:nowrap;bottom:50%;left:0;position:absolute;right:0;text-align:center}.noPage-module--noPage--6da61 h2,.project-module--projectBody--24363 h1{color:var(--header-text-colour);font-family:"Bespoke Serif",serif;font-size:6.854rem;font-weight:400;line-height:1.1em}.project-module--projectBody--24363 h1{overflow-wrap:normal}.project-module--projectBody--24363 h2{font-size:4.236rem;overflow-wrap:normal}.project-module--projectBody--24363 h2,.project-module--projectBody--24363 h3{color:var(--header-text-colour);font-family:"Bespoke Serif",serif;font-weight:400}.project-module--projectBody--24363 h3{font-size:2.618rem}.project-module--projectBody--24363 h4{color:var(--header-text-colour);font-size:1.618rem}@media (max-width:500px){.project-module--projectBody--24363 h1{font-size:3.157rem}.project-module--projectBody--24363 h2{font-size:2.369rem}:before .project-module--projectBody--24363 h3{font-size:1.777rem}.project-module--projectBody--24363 h4{font-size:1.333rem}}.project-module--projectBody--24363 a{color:#1188a0;position:relative}.project-module--projectBody--24363 table{--border:2px solid var(--dividing-bar-colour);border:var(--border);border-collapse:separate;border-radius:10px;border-spacing:0;overflow:hidden}.project-module--projectBody--24363 table td:not(:last-child),.project-module--projectBody--24363 table th:not(:last-child){border-right:var(--border)}.project-module--projectBody--24363 table td,.project-module--projectBody--24363 table th{padding:10px}.project-module--codeFenceBar--3b8c8{align-items:center;background-color:var(--code-block-colour);border-top-left-radius:var(--grvsc-border-radius);border-top-right-radius:var(--grvsc-border-radius);display:flex;gap:.3em;left:0;margin-left:0;margin-right:0;max-width:100%;position:relative;text-align:center;transform:translateY(20px);z-index:1}.project-module--codeFenceBar--3b8c8 a{color:grey;display:block;margin-left:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.project-module--codeFenceBar--3b8c8 a:after{margin:2px 0;padding-inline:0 0}.project-module--codeFenceBar--3b8c8 span{flex-shrink:0;margin-right:0;padding-inline:20px 0}.project-module--test--5296c{background-color:#f5333f!important}@media (max-width:1200px){.project-module--headerNav--2205b{display:none}}.project-module--headerNav--2205b{left:0;max-height:100vh;overflow:auto;padding-left:2rem;padding-top:2rem;position:fixed;top:0}.project-module--headerNav--2205b ul{padding-left:1rem;position:relative}.project-module--headerNav--2205b ul:before{background-color:var(--dividing-bar-colour);border-radius:10px;content:"";height:100%;left:0;margin:0;position:absolute;top:0;width:3px}.project-module--headerNav--2205b a{color:var(--pargraph-text-colour);position:relative}.project-module--headerNav--2205b h2{color:var(--header-text-colour);font-family:"Bespoke Serif",serif;font-size:1.618rem}.project-module--headerNav--2205b a:hover{color:#f5333f}.project-module--depth2--aa591,.project-module--depth3--b8779{line-height:2em;list-style-type:none}.project-module--depth3--b8779{margin-left:2rem}.project-module--depth3--b8779:before{background-color:grey;border-radius:10px;content:"";margin-right:1rem;padding:1px 2px}.project-module--depth3--b8779.project-module--selectedHeader--6e535:before{background-color:#f5333f}.project-module--selectedHeader--6e535{color:#f5333f}.project-module--projectBody--24363 .project-module--gatsby-resp-image-link--f454d a{display:none}[colour-theme=dark]{--code-block-colour:#3b2e58;--background-colour:#242525;--inline-code-colour:#c4bdb3;--inline-code-background:#002b36;--paragraph-text-colour:#c4bdb3;--header-text-colour:#e3dbcf;--scroll-bar-track-colour:#2b2d2d;--scroll-bar-colour:#4c4c4c;--scroll-bar-hover-colour:#777;--contact-me-icon-colour:#e3dbcf;--footer-background-colour:#7777;--header-colour:#777;--dividing-bar-colour:#7777;--dark-mode-button-background-colour:#7777;--dark-mode-button-colour:#fff;--left-circle-dark-mode-background-colour:transparent;--right-circle-dark-mode-background-colour:#fff}[colour-theme=light]{--code-block-colour:#f7df1e;--background-colour:#fff;--inline-code-colour:#373737;--inline-code-background:#fdf6e3;--paragraph-text-colour:#373737;--header-text-colour:#000;--scroll-bar-colour:#777;--scroll-bar-hover-colour:#4c4c4c;--scroll-bar-track-colour:#c3c6c6;--contact-me-icon-colour:#fff;--footer-background-colour:#bbbbbb98;--header-colour:#373737;--dividing-bar-colour:#eee;--dark-mode-button-colour:#fff;--dark-mode-button-background-colour:#bbbbbb98;--left-circle-dark-mode-background-colour:#777;--right-circle-dark-mode-background-colour:transparent}:root{--grvsc-border-radius:10px;--grvsc-padding-top:2rem;--grvsc-padding-bottom:0rem;--dark-button-scale:0.7}.flex-box{display:flex;flex-direction:column;min-height:100vh}.content-column{box-sizing:border-box;flex-shrink:1;font-family:General Sans,sans-serif;font-size:1rem;max-width:calc(65ch + 400px*var(--dark-button-scale));overflow-wrap:break-word;padding-inline:calc(200px*var(--dark-button-scale) + .8rem);position:relative;width:100%}*{margin:0 auto;padding:0}@media (max-width:650px){.content-column{max-width:calc(35ch + (100px*var(--dark-button-scale))*2);padding-inline:calc(100px*var(--dark-button-scale) + .8rem)}}html{font-size:1rem}body{background-color:var(--background-colour);color:var(--paragraph-text-colour);line-height:1.75}main{flex:1 0 auto}body a{text-decoration:none;white-space:nowrap}body a:after{background:currentColor;border-radius:10px;bottom:0;content:"";height:2px;left:50%;margin:-3px 0;position:absolute;transform:translateX(-50%);transition:width .5s;width:0}body a:hover:after{width:100%}body p{padding:.5rem 0}.banner-style{position:relative;text-align:center}.banner-style h1{color:var(--header-colour);font-family:"Bespoke Serif",serif;font-size:2.618rem;font-weight:300}.banner-style:after{background-color:var(--dividing-bar-colour);border-radius:10px;bottom:0;content:"";height:2px;left:0;position:absolute;width:100%}.banner-style a:after{background-color:#f5333f;height:2px;margin:0;z-index:2}footer{background-color:var(--footer-background-colour);display:flex;flex-direction:row;gap:2rem;justify-content:center;text-align:center;width:100%}footer a{flex:0 0 auto;margin:.5rem 0}footer a:after{display:none}footer svg:hover{fill:#1188a0}footer svg{fill:var(--contact-me-icon-colour);max-height:50px;max-width:50px;position:relative}.dark-mode-button{fill:var(--dark-mode-button-colour);background-color:transparent;border-color:transparent;bottom:.5rem;cursor:pointer;margin-left:auto;margin-right:.6rem;position:-webkit-sticky;position:sticky;right:0;z-index:2}.dark-mode-button span{align-items:center;background-color:var(--dark-mode-button-background-colour);border-radius:calc(50px*var(--dark-button-scale));display:flex;height:calc(100px*var(--dark-button-scale));justify-content:center;position:relative;width:calc(200px*var(--dark-button-scale))}.moon-button,.sun-button{stroke:var(--dark-mode-button-colour);flex:1 1;margin:5px;max-height:100%;max-width:100%}.sun-button{fill:var(--dark-mode-button-colour)}.circle-left,.circle-right{border-radius:100%;height:calc(92px*var(--dark-button-scale));position:absolute;width:calc(92px*var(--dark-button-scale))}.circle-left{background-color:var(--left-circle-dark-mode-background-colour);left:calc(50px*var(--dark-button-scale) - 46px*var(--dark-button-scale))}.circle-right{background-color:var(--right-circle-dark-mode-background-colour);right:calc(50px*var(--dark-button-scale) - 46px*var(--dark-button-scale))}@media (max-width:650px){.dark-mode-button span{flex-direction:column;height:calc(200px*var(--dark-button-scale));width:calc(100px*var(--dark-button-scale))}.circle-left{background-color:var(--left-circle-dark-mode-background-colour);top:calc(50px*var(--dark-button-scale) - 46px*var(--dark-button-scale))}.circle-right{background-color:var(--right-circle-dark-mode-background-colour);bottom:calc(50px*var(--dark-button-scale) - 46px*var(--dark-button-scale))}}@media (max-width:400px){:root{--dark-button-scale:0.3}}:root[colour-theme=dark] .dark-mode-button:hover .sun-button{animation:rotate-sun 8s linear infinite;transition:transform .5 linear}@keyframes rotate-sun{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}:root[colour-theme=light] .dark-mode-button:hover .moon-button{animation:rotate-moon 3s linear infinite}@keyframes rotate-moon{0%{transform:scale(1)}50%{transform:scale(.9)}to{transform:scale(1)}}::-webkit-scrollbar{height:.5rem;width:.5rem}::-webkit-scrollbar-track:vertical{background-color:var(--scroll-bar-track-colour)}::-webkit-scrollbar-thumb{background-color:var(--scroll-bar-colour);border-radius:9999px;height:30px}::-webkit-scrollbar-thumb:hover{background:var(--scroll-bar-hover-colour)}.grvsc-container{font-family:Source Code Pro,monospace;margin-bottom:1rem;margin-top:0}.grvsc-container code{width:100%}.grvsc-line-number{width:0}.grvsc-gutter-pad{display:none;width:0}.custom-inline-code{background-color:var(--inline-code-background)!important;border-radius:.5rem;padding:0 .2rem}.custom-inline-code span{color:var(--inline-code-colour)!important;font-family:General Sans}span.gatsby-resp-image-wrapper{padding:10px 0}a.gatsby-resp-image-link{border:3px solid var(--dividing-bar-colour);border-radius:3px}a.gatsby-resp-image-link:hover{border-color:#1188a0;transition:border-color;transition-duration:.5s}a.gatsby-resp-image-link:after{display:none}.home-module--header--caa3a{align-items:center}.home-module--header--caa3a a{color:#1188a0;position:relative}.home-module--header--caa3a li{list-style-type:none}.home-module--header--caa3a h2{color:var(--header-text-colour);font-family:"Bespoke Serif",serif;font-size:4.236rem;font-weight:900;overflow-wrap:normal}@media (max-width:650px){.home-module--header--caa3a h2{font-size:3.157rem}}.home-module--date--58a6d{color:#aaa}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="flex-box"><main class="content-column"><div class="banner-style"><a href="/cv/"><h1 class="highlight-effect">James Wood</h1></a></div><section class="project-module--projectBody--24363"><div class="project-module--headerNav--2205b"><h2>Page Contents</h2><ul><li class="project-module--depth2--aa591 "><a href="#CMake">CMake</a></li><li class="project-module--depth3--b8779 "><a href="#CMakeLists.txt">CMakeLists.txt</a></li><li class="project-module--depth3--b8779 "><a href="#Running the Cmake">Running the Cmake</a></li><li class="project-module--depth2--aa591 "><a href="#The Window">The Window</a></li><li class="project-module--depth3--b8779 "><a href="#Project setup">Project setup</a></li><li class="project-module--depth3--b8779 "><a href="#Debugging">Debugging</a></li><li class="project-module--depth3--b8779 "><a href="#Creating the window">Creating the window</a></li><li class="project-module--depth3--b8779 "><a href="#Window procedure">Window procedure</a></li><li class="project-module--depth3--b8779 "><a href="#Message Loop">Message Loop</a></li></ul></div><h1 id="Project: Win32 Window">Project: Win32 Window</h1>
<p>This is a simple project, which consists of using the Win32 API to create a window, and then displaying this window at the center of the screen. I have used the Win32 API to create a window in previous projects using the Visual Studio Windows Desktop Application template. I wanted to create this project using CMake. While I have used CMake with console applications before, I have not used it with GUI applications.</p>
<h2 id="CMake">CMake</h2>
<h3 id="CMakeLists.txt">CMakeLists.txt</h3>
<p>This is a simple CMake project so I only have a single <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="0"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">CMakeLists.txt</span></code> file which is in the below code fence. The file consists of the usual CMake setup except I specify the <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="1"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">WIN32</span></code> property when calling the <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="2"><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">add_executable</span></code> command. This makes <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="3"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">Window</span></code>a GUI executable instead of a console application. And the entry point to the program will now be <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="4"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">WinMain</span></code> or <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="5"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">wWinMain</span></code> rather than <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="6"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">main</span></code>.</p>
<p>While it is possible to create a window within a console application, which can be beneficial during development for error output and debugging. I opted to develop it as a GUI application and manage error output independently.</p>
<div class="project-module--codeFenceBar--3b8c8"><span>CMAKE -</span><a href="https://github.com/james-door/Win32-Window/blob/master/CMakeLists.txt#Ltrue">Win32-Window/CMakeLists.txt</a></div><pre class="grvsc-container CMAKE__Win32-Window/CMakeLists.txt__https://github.com/james-door/Win32-Window/blob/master/CMakeLists.txt#Ltrue solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="0"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="1"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">cmake_minimum_required</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(VERSION </span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">3.8</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="2"></span><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="3"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">project </span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(</span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;Window&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="4"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">set</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(CMAKE_CXX_STANDARD </span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">17</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="5"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">add_executable</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(Window WIN32 </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;Window.cpp&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="6"></span><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="7"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">option</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(USE_UNICODE </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;Support Unicode.&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5">ON</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="8"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">if</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(USE_UNICODE)</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="9"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">target_compile_definitions</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(Window PUBLIC UNICODE)</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="10"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">target_compile_definitions</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(Window PUBLIC _UNICODE)</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="11"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">endif</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">()</span></span></span></code></pre>
<p>Additionally I create a CMake option <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="7"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">USE_UNICODE</span></code>. This option once built is stored in the <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="8"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">CMakeCache.txt</span></code>. Once built if we want to change the value of the CMake option we cannot just change the default value in the <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="9"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">CMakeLists.txt</span></code>. We either have to manually edit the <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="10"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">CMakeCache.txt</span></code> or delete it.</p>
<p>Alternatively, we can change the value of the option by specifying it in the CMake command line, a process which is simplified by using presets.
When <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="11"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">USE_UNICODE</span></code> is <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="12"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">ON</span></code> we set two compiler definitions <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="13"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">UNICODE</span></code> and <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="14"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">_UNICODE</span></code>. These compiler definitions will set both the Windows API and C runtime respectively to map functions to their wide-character versions. When <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="15"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">USE_UNICODE</span></code> is <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="16"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">OFF</span></code> then the functions will be mapped to narrow character versions. I use the <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="17"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">PUBLIC</span></code> specifier when adding the compile definition to the executable, ensuring that it is applied when linking with the Windows API and C runtime.</p>
<h3 id="Running the Cmake">Running the Cmake</h3>
<p>In order to get an executable to run on our OS we first need to choose a generator. A CMake generator is responsible for translating the platform independent <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="18"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">CMakeLists.txt</span></code> configuration files into platform-specific build files.</p>
<p>For this project I used <a href="https://ninja-build.org/">Ninja</a> for my generator. To aid with the building, I created a <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="19"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">CMakeUserPresets.json</span></code> where I created two presets. The presets allow me to set <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="20"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">USE_UNICODE</span></code> without having to manually edit the <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="21"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">CMakeCache.txt</span></code> and allow me to set the generator and compilers I am using without having to use the CMake command line. The difference between the two presets is the value of the Cmake variable <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="22"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">CMAKE_BUILD_TYPE</span></code>. This variable determines whether the compiler is running in debug or release mode.</p>
<div class="project-module--codeFenceBar--3b8c8"><div class="test">JSON</div></div><pre class="grvsc-container JSON solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="json" data-index="1"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&quot;version&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">: </span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">3</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&quot;configurePresets&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">: [</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&quot;name&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">: </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;debug&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&quot;generator&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">: </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;Ninja&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&quot;binaryDir&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">: </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;${sourceDir}/out/build/debug&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&quot;cacheVariables&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">: {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&quot;CMAKE_C_COMPILER&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">: </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;C:/Program Files/LLVM/bin/clang.exe&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&quot;CMAKE_CXX_COMPILER&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">: </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;C:/Program Files/LLVM/bin/clang++.exe&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&quot;CMAKE_BUILD_TYPE&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">: </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;Debug&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&quot;USE_UNICODE&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> :</span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5">false</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">},</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&quot;name&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">: </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;release&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&quot;generator&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">: </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;Ninja&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&quot;binaryDir&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">: </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;${sourceDir}/out/build/release&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&quot;cacheVariables&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">: {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&quot;CMAKE_C_COMPILER&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">: </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;C:/Program Files/LLVM/bin/clang.exe&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&quot;CMAKE_CXX_COMPILER&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">: </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;C:/Program Files/LLVM/bin/clang++.exe&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&quot;CMAKE_BUILD_TYPE&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">: </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;Release&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&quot;USE_UNICODE&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> :</span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5">false</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">}</span></span></span></code></pre>
<p>To generate the build files, I use the command-line <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="23"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">--preset</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">&lt;preset-name&gt;</span></code>. Then, I navigate to the build directory and use the <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="cmake" data-index="24"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">ninja</span></code> command.</p>
<h2 id="The Window">The Window</h2>
<h3 id="Project setup">Project setup</h3>
<p>Given that I am only creating a window, I only require the <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="25"><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">Windows</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">h</span></code> header file, which is required for accessing a number of Windows&#x27; APIs. Furthermore, since I am only using the Win32 API, I define <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="26"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">WIN32_LEAN_AND_MEAN</span></code>. This definition excludes a number unrequired APIs. To assist with error logging, I also include a C++ standard library, <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="27"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">sstream</span></code>.</p>
<div class="project-module--codeFenceBar--3b8c8"><span>C++ -</span><a href="https://github.com/james-door/Win32-Window/blob/master/Window.cpp#L1">Win32-Window/Window.cpp</a></div><pre class="grvsc-container C++__Win32-Window/Window.cpp__https://github.com/james-door/Win32-Window/blob/master/Window.cpp#L1 solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="2"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="1"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">#define</span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5"> </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">WIN32_LEAN_AND_MEAN</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="2"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">#include</span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5"> </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&lt;Windows.h&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="3"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">#include</span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5"> </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&lt;sstream&gt;</span></span></span></code></pre>
<p>In the <a href="#CMake">CMake</a> section I don&#x27;t explictly link any Win32 library files. Most C++ compilers that support Windows, including Clang++, MSVC, and GCC (when used for Windows development), are configured to automatically link against these standard Windows libraries.</p>
<h3 id="Debugging">Debugging</h3>
<p>The first step I took was handling any potential future run-time errors generated by the Win32 API. The API doesn&#x27;t use C++ exceptions for run-time errors so we must manually check for them the using function <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="28"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">FormatMessage</span></code>.</p>
<p>To determine if an error has occured I created the preprocessor macro <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="29"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">HANDLE_RETURN</span></code> which takes a Boolean indicating whether an error has occured. I use the predefiend macros <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="30"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">__FILE__</span></code> and <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="31"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">__LINE__</span></code> to also get the file and line the macro was called from. Given that it is no longer a console application we can&#x27;t output debug information to console. Instead I log any errors in the string stream <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="32"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">Win32ErrorLog</span></code>. Given that the langauge of the messages are English by default there is no need to use unicode for the error messages and I can use narrow version <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="33"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">FormatMessageA</span></code>.</p>
<div class="project-module--codeFenceBar--3b8c8"><span>C++ -</span><a href="https://github.com/james-door/Win32-Window/blob/master/Window.cpp#L7">Win32-Window/Window.cpp</a></div><pre class="grvsc-container C++__Win32-Window/Window.cpp__https://github.com/james-door/Win32-Window/blob/master/Window.cpp#L7 solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="3"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="7"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">#define</span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5"> </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">HANDLE_RETURN</span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5">(err) </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">LogIfFailed</span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5">(err, __FILE__, __LINE__)</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="8"></span><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="9"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-4">std</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">::stringstream Win32ErrorLog;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="10"></span><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="11"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-13 grvsc-tiaGIi-b grvsc-t6zo1R-1 grvsc-t6zo1R-b">inline</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-13 grvsc-tiaGIi-b grvsc-t6zo1R-1 grvsc-t6zo1R-b">void</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">LogIfFailed</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(</span><span class="grvsc-tiaGIi-13 grvsc-tiaGIi-b grvsc-t6zo1R-1 grvsc-t6zo1R-b">bool</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> err, </span><span class="grvsc-tiaGIi-13 grvsc-tiaGIi-b grvsc-t6zo1R-1 grvsc-t6zo1R-b">const</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-13 grvsc-tiaGIi-b grvsc-t6zo1R-1 grvsc-t6zo1R-b">char*</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> file, </span><span class="grvsc-tiaGIi-13 grvsc-tiaGIi-b grvsc-t6zo1R-1 grvsc-t6zo1R-b">int</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> line)</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="12"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="13"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">if</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> (err)</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="14"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    {</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="15"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        DWORD error </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">GetLastError</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">();</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="16"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        LPVOID lpMsgBuf;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="17"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">FormatMessageA</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="18"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">            FORMAT_MESSAGE_ALLOCATE_BUFFER </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">|</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="19"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">            FORMAT_MESSAGE_FROM_SYSTEM </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">|</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="20"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">            FORMAT_MESSAGE_IGNORE_INSERTS,</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="21"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">            </span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5">NULL</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="22"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">            error,</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="23"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">            </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">MAKELANGID</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(LANG_NEUTRAL, SUBLANG_DEFAULT),</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="24"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">            (LPSTR)</span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&amp;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">lpMsgBuf,</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="25"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">            </span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">0</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">, </span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5">NULL</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="26"></span><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="27"></span><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="28"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-4">std</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">::string message </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;File: &quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">+</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-4">std</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">::</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">string</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(file) </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">+</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;</span><span class="grvsc-tiaGIi-4 grvsc-t6zo1R-4">\n\n</span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">Message: &quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">+</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-4">std</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">::</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">string</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">((</span><span class="grvsc-tiaGIi-13 grvsc-tiaGIi-b grvsc-t6zo1R-1 grvsc-t6zo1R-b">char</span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">*</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">)lpMsgBuf) </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">+</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;</span><span class="grvsc-tiaGIi-4 grvsc-t6zo1R-4">\n\n</span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">Line: &quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">+</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-4">std</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">::</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">to_string</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(line);</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="29"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">LocalFree</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(lpMsgBuf);</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="30"></span><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="31"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        Win32ErrorLog </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&lt;&lt;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> message;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="32"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="33"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="34"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">}</span></span></span></code></pre>
<p>At the end of the appliction I then call <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="34"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">displayErrorMessage</span></code>, which create an ASNI Windows dialog box with any error messages in it.</p>
<div class="project-module--codeFenceBar--3b8c8"><span>C++ -</span><a href="https://github.com/james-door/Win32-Window/blob/master/Window.cpp#L116">Win32-Window/Window.cpp</a></div><pre class="grvsc-container C++__Win32-Window/Window.cpp__https://github.com/james-door/Win32-Window/blob/master/Window.cpp#L116 solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="4"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="116"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">  </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">if</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> (</span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">!</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">Win32ErrorLog</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">str</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">().</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">empty</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">()) {</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="117"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">displayErrorMessage</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(</span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;Win32 Errors:</span><span class="grvsc-tiaGIi-4 grvsc-t6zo1R-4">\n\n</span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">+</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">Win32ErrorLog</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">str</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">());</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="118"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    }</span></span></span></code></pre>
<p>In future I could also choose to log the the messages in a file in case the application never reaches <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="35"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">displayErrorMessage</span></code>.</p>
<h3 id="Creating the window">Creating the window</h3>
<p>The first step when creating a window using the Win32 API is to create a window class. A window class is represented as an instance of the <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="36"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">WNDCLASSEX</span></code> struct. One of the main fields in this struct is <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="37"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">lpfnWndProc</span></code> where we specify the window procedure. For the <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="38"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">hCursor</span></code> and <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="39"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">hIconSm</span></code> I specify default values, such that it will use the default window icon and cursor icon. And Iset the class name to be <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="40"><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;</span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">window</span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;</span></code>. The class is registred using <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="41"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">RegisterClassEx</span></code> which return <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="42"><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">0</span></code> if it fails, which I use the <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="43"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">HANDLE_RETURN</span></code> macro to check.</p>
<div class="project-module--codeFenceBar--3b8c8"><span>C++ -</span><a href="https://github.com/james-door/Win32-Window/blob/master/Window.cpp#L61">Win32-Window/Window.cpp</a></div><pre class="grvsc-container C++__Win32-Window/Window.cpp__https://github.com/james-door/Win32-Window/blob/master/Window.cpp#L61 solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="5"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="61"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">  WNDCLASSEX winClass </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> {};</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="62"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">winClass</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">cbSize</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">sizeof</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(WNDCLASSEX);</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="63"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">winClass</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">style</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> CS_HREDRAW </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">|</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> CS_VREDRAW;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="64"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">winClass</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">lpfnWndProc</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> WndProc;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="65"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">winClass</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">cbClsExtra</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">0</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="66"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">winClass</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">cbWndExtra</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">0</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="67"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">winClass</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">hInstance</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> hInstance;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="68"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">winClass</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">hIcon</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5">NULL</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="69"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">winClass</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">hCursor</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">LoadCursor</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(hInstance, </span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5">NULL</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="70"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">winClass</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">hbrBackground</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> (HBRUSH)(COLOR_WINDOW</span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">+</span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">1</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="71"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">winClass</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">lpszMenuName</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5">NULL</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="72"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">winClass</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">lpszClassName</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;window&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="73"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">winClass</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">hIconSm</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">LoadIcon</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(hInstance, </span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5">NULL</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="74"></span><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="75"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">HANDLE_RETURN</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">RegisterClassEx</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(</span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&amp;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">winClass) </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">==</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">0</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">);</span></span></span></code></pre>
<p>The client area is the part of the window where the application can render content. The window area includes the client area and other parts of the window such as the title bar, border and menu bar. I have defiend the client area to be have a width of <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="44"><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">990</span></code> and a height of <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="45"><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">540</span></code> pixels. The function <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="46"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">AdjustWindowRect</span></code>  takes the client area and based on the desired style of the window, in this case <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="47"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">WS_OVERLAPPEDWINDOW</span></code>, and returns the window area. Based on the the returned <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="48"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">RECT</span></code> I could now calculate the width and height of the window area.</p>
<p>I wanted the position of the window when it is created to appear in the centre of the screen. To centre the window required the coordinates of the top left corner of the centred window. Using the area of the primary display, which I got using <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="49"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">GetSystemMetrics</span></code> and the window area I calculated <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="50"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">centreX</span></code> and <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="51"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">centreY</span></code>. If I had used the client area in this caclulation these coordinates would be slightly incorrect.</p>
<div class="project-module--codeFenceBar--3b8c8"><span>C++ -</span><a href="https://github.com/james-door/Win32-Window/blob/master/Window.cpp#L79">Win32-Window/Window.cpp</a></div><pre class="grvsc-container C++__Win32-Window/Window.cpp__https://github.com/james-door/Win32-Window/blob/master/Window.cpp#L79 solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="6"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="79"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-13 grvsc-tiaGIi-b grvsc-t6zo1R-1 grvsc-t6zo1R-b">constexpr</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> LONG defaultWindowWidth </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">990</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="80"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-13 grvsc-tiaGIi-b grvsc-t6zo1R-1 grvsc-t6zo1R-b">constexpr</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> LONG defaultWindowHeight </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">540</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="81"></span><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="82"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    RECT windowArea </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> {};</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="83"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">windowArea</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">left</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">0</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="84"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">windowArea</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">top</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">0</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="85"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">windowArea</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">right</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> defaultWindowWidth;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="86"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">windowArea</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">bottom</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> defaultWindowHeight;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="87"></span><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="88"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">HANDLE_RETURN</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">AdjustWindowRect</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(</span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&amp;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">windowArea, WS_OVERLAPPEDWINDOW, TRUE) </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">==</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">0</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="89"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-13 grvsc-tiaGIi-b grvsc-t6zo1R-1 grvsc-t6zo1R-b">int</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> windowAreaWidth </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">static_cast&lt;</span><span class="grvsc-tiaGIi-13 grvsc-tiaGIi-b grvsc-t6zo1R-1 grvsc-t6zo1R-b">int</span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&gt;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">windowArea</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">right</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">-</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">windowArea</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">left</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="90"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-13 grvsc-tiaGIi-b grvsc-t6zo1R-1 grvsc-t6zo1R-b">int</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> windowAreaHeight </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">static_cast&lt;</span><span class="grvsc-tiaGIi-13 grvsc-tiaGIi-b grvsc-t6zo1R-1 grvsc-t6zo1R-b">int</span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&gt;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">windowArea</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">bottom</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">-</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">windowArea</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">top</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="91"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-13 grvsc-tiaGIi-b grvsc-t6zo1R-1 grvsc-t6zo1R-b">int</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> displayWidth </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">GetSystemMetrics</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(SM_CXSCREEN);</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="92"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-13 grvsc-tiaGIi-b grvsc-t6zo1R-1 grvsc-t6zo1R-b">int</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> displayHeight </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">GetSystemMetrics</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(SM_CYSCREEN);</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="93"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-13 grvsc-tiaGIi-b grvsc-t6zo1R-1 grvsc-t6zo1R-b">int</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> centreX </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> (displayWidth </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">-</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> windowAreaWidth) </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">/</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">2</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="94"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-13 grvsc-tiaGIi-b grvsc-t6zo1R-1 grvsc-t6zo1R-b">int</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> centreY </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> (displayHeight </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">-</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> windowAreaHeight) </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">/</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">2</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">;</span></span></span></code></pre>
<p>The window is created using the funciton <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="52"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">CreateWindowEx</span></code> which takes the class name, and the window name is which is displayed in title bar if there is one. It also takes the style of the window, the location of where it starts and the window area. This function does not activate the widow nor does it display the window. To activate the window and display it in its current size I called the function <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="53"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">ShowWindow</span></code> with a value of <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="54"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">SW_SHOW</span></code>.</p>
<div class="project-module--codeFenceBar--3b8c8"><span>C++ -</span><a href="https://github.com/james-door/Win32-Window/blob/master/Window.cpp#L96">Win32-Window/Window.cpp</a></div><pre class="grvsc-container C++__Win32-Window/Window.cpp__https://github.com/james-door/Win32-Window/blob/master/Window.cpp#L96 solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="7"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="96"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    HWND windowHandle </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">CreateWindowEx</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(</span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5">NULL</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">, </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;window&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">, </span><span class="grvsc-tiaGIi-11 grvsc-t6zo1R-12">&quot;My Window&quot;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">, WS_OVERLAPPEDWINDOW, centreX,</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="97"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">     centreY, windowAreaWidth, windowAreaHeight, </span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5">NULL</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">, </span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5">NULL</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">, hInstance, </span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5">nullptr</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="98"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">HANDLE_RETURN</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(windowHandle </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">==</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5">NULL</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="99"></span><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="100"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">ShowWindow</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(windowHandle, SW_SHOW);</span></span></span></code></pre>
<p>Even if we have declared the correct prototype for window procedure <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="55"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">lpfnWndProc</span></code> running this code currently would cause a Win32 error. This is because the when creating the window is requires a valid window procedure.</p>
<h3 id="Window procedure">Window procedure</h3>
<p>The window procedure is a callback that handles window messages for a particular window. When we create a window class we specify a window procedure, <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="56"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">lpfnWndProc</span></code>. Before we can successfully create a window instance we must create a valid window procedure. To be a valid windows procedure there is a minimal amount of message codes that it must deal with. If we dont wish to manually implement the required message codes we can call the Win32 function <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="57"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">DefWindowProc</span></code>. In the below code fence my window procedure deals with only one window message <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="58"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">WM_DESTROY</span></code> and returns the default behaviour for every other window message.</p>
<p>The window message <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="59"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">WM_DESTORY</span></code> is sent to the window procedure of the window being destroyed after the window is removed from the screen. I handle the message by sending the thread message <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="60"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">WM_QUIT</span></code> using the function <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="61"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">PostQuitMessage</span></code>.</p>
<div class="project-module--codeFenceBar--3b8c8"><span>C++ -</span><a href="https://github.com/james-door/Win32-Window/blob/master/Window.cpp#L41">Win32-Window/Window.cpp</a></div><pre class="grvsc-container C++__Win32-Window/Window.cpp__https://github.com/james-door/Win32-Window/blob/master/Window.cpp#L41 solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="8"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="41"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-4">LRESULT</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">WndProc</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-4">HWND</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> hWnd, </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-4">UINT</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> uMsg, </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-4">WPARAM</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> wParam, </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-4">LPARAM</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> lParam) {</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="42"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">switch</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> (uMsg) {</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="43"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">case</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> WM_DESTROY:</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="44"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">PostQuitMessage</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(</span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">0</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="45"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">break</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="46"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">default</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="47"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">return</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">DefWindowProc</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(hWnd, uMsg, wParam, lParam);</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="48"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="49"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">return</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">0</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="50"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">}</span></span></span></code></pre>
<h3 id="Message Loop">Message Loop</h3>
<p>The message loop continually reads messages from the message queue dispatching window messages to their relevant window procedures and dealing with any thread messages. In the below code fence I continually loop until the thread message <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="62"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">WM_QUIT</span></code> is read from the message queue. Messages are read from the message queue using the function <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="63"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">GetMessage</span></code>. Since <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="64"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">GetMessage</span></code> in this instance is called with <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="65"><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5">NULL</span></code> for the window handle, it retrieves messages for any window in the current thread and also thread messages. The function is also blocking, meaning that it waits for a message to be available before returning. If a window message has been retrieved, <code class="custom-inline-code solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="66"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">DispatchMessage</span></code> dispatches it to the procedure associated with the message&#x27;s target window</p>
<div class="project-module--codeFenceBar--3b8c8"><span>C++ -</span><a href="https://github.com/james-door/Win32-Window/blob/master/Window.cpp#L101">Win32-Window/Window.cpp</a></div><pre class="grvsc-container C++__Win32-Window/Window.cpp__https://github.com/james-door/Win32-Window/blob/master/Window.cpp#L101 solarized-light grvsc-ps-tiaGIi grvsc-ps-t6zo1R" data-language="c++" data-index="9"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="101"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    MSG windowMsg</span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> {};</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="102"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">while</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> (</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">windowMsg</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">.</span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">message</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> </span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">!=</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1"> WM_QUIT) {</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="103"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">GetMessage</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(</span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&amp;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">windowMsg, </span><span class="grvsc-tiaGIi-5 grvsc-t6zo1R-5">NULL</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">, </span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">0</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">, </span><span class="grvsc-tiaGIi-6 grvsc-t6zo1R-6">0</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">);</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="104"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">        </span><span class="grvsc-tiaGIi-7 grvsc-t6zo1R-7">DispatchMessage</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">(</span><span class="grvsc-tiaGIi-8 grvsc-t6zo1R-9">&amp;</span><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">windowMsg);</span></span></span>
<span class="grvsc-line"><span class="grvsc-gutter-pad"></span><span class="grvsc-gutter grvsc-line-number" aria-hidden="true" data-content="105"></span><span class="grvsc-source"><span class="grvsc-tiaGIi-1 grvsc-t6zo1R-1">    }</span></span></span></code></pre>
<p>Without completing the message loop, the window will appear, but then the program will finish executing, and the window will instantly close. Now, with the message loop, here is the created window. It&#x27;s not much, but it is centered (Note: it is not centered in the screenshot, as the taskbar has been cut off).</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:590px">
      <a class="gatsby-resp-image-link" href="/cv/static/00d0f9f399d66a782fab21cf809a830c/29114/window.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:54.05405405405405%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACaklEQVR42o2TWU8TYRSG51d44Q2ubEVoS1u6QffSlrYsLbSFAiWCCnSB4EKklArRxAQNBEESY8QLlRC542cYpTWAVxLgd8DjN5No8ELDSU6+yZnJM+e833uk5OAQxSfz+PxBbE4PWoMZndGKVm8imx4lEo2yMD/Hp4/vKRYL1NRpqGvQYbW5RbowWe1Y7R7qtUYcbj9ST6KPmXye1kAQuwDW3NJy9WYtjXojA/29AhhhfXWJzQ8bTOSyXLpcwbVKFdUCrBc/dnkDtDh9GCwODGY70vDIMBOTU7R3RtE1WQQ4zMulFd5tbLC1tcn29md2v37he/kbOzs7LL5YYuXVa5ZXVvGHOjE1u7CLzoxWB/WNJqR8foZCoUCHAFbXqRm+O4YcZ2dn/Ct+v7kzmkFvsuH0tqExWKhUaZBmZ2fJZHMEgu3oRYfp7KTy8enp6Z+U4XKer8kxOp4TejcL7X1KdxU3apHSmRypoduEwp1/AS8Sk1MPMQrt5JFVah3Xq+uRxsbTxBNJBajWGhg5N/L/Uo4H04+xiJt2evyKXFfEZQnguNAvIoo+zM12oUv6wh3mZ4vKLYeF/lq9WXGHFIsncAmY0+1TzkTfIPv7Bxwe/uTk5JjjoyPK5TK7pZKo77O3t0epVObg4Af3xjK02N10RXvE6DaqVGqkSDSGLxDC6wsqwCpVA7F4nOlH91lfW2bx+VP0BhMWq42QsIksjbfVL547CLV30dnVTXIgJewWQiOWQZK3w2huER22KpsiGzsWi5FKDfL2zRrPFuaEyZtoC4YFKKBsVG9fUhi+m55YnA4Z2D8ozijNDg+/AKBPJ83zn85yAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="window" title="" src="/cv/static/00d0f9f399d66a782fab21cf809a830c/fcda8/window.png" srcSet="/cv/static/00d0f9f399d66a782fab21cf809a830c/12f09/window.png 148w,
/cv/static/00d0f9f399d66a782fab21cf809a830c/e4a3f/window.png 295w,
/cv/static/00d0f9f399d66a782fab21cf809a830c/fcda8/window.png 590w,
/cv/static/00d0f9f399d66a782fab21cf809a830c/efc66/window.png 885w,
/cv/static/00d0f9f399d66a782fab21cf809a830c/c83ae/window.png 1180w,
/cv/static/00d0f9f399d66a782fab21cf809a830c/29114/window.png 1920w" sizes="(max-width: 590px) 100vw, 590px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></p>
<style class="grvsc-styles">
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line > * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: ' ';
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {
    content: ' ';
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
  .solarized-light { background-color: #FDF6E3; }
  .solarized-light .grvsc-tiaGIi-b { font-weight: bold; }
  .solarized-light .grvsc-tiaGIi-7 { color: #268BD2; }
  .solarized-light .grvsc-tiaGIi-1 { color: #657B83; }
  .solarized-light .grvsc-tiaGIi-6 { color: #D33682; }
  .solarized-light .grvsc-tiaGIi-11 { color: #2AA198; }
  .solarized-light .grvsc-tiaGIi-5 { color: #B58900; }
  .solarized-light .grvsc-tiaGIi-8 { color: #859900; }
  .solarized-light .grvsc-tiaGIi-13 { color: #073642; }
  .solarized-light .grvsc-tiaGIi-4 { color: #CB4B16; }
  .solarized-light .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));
  }
  html[colour-theme=light] .grvsc-ps-tiaGIi { background-color: #FDF6E3; }
  html[colour-theme=light] .grvsc-ps-tiaGIi .grvsc-tiaGIi-b { font-weight: bold; }
  html[colour-theme=light] .grvsc-ps-tiaGIi .grvsc-tiaGIi-7 { color: #268BD2; }
  html[colour-theme=light] .grvsc-ps-tiaGIi .grvsc-tiaGIi-1 { color: #657B83; }
  html[colour-theme=light] .grvsc-ps-tiaGIi .grvsc-tiaGIi-6 { color: #D33682; }
  html[colour-theme=light] .grvsc-ps-tiaGIi .grvsc-tiaGIi-11 { color: #2AA198; }
  html[colour-theme=light] .grvsc-ps-tiaGIi .grvsc-tiaGIi-5 { color: #B58900; }
  html[colour-theme=light] .grvsc-ps-tiaGIi .grvsc-tiaGIi-8 { color: #859900; }
  html[colour-theme=light] .grvsc-ps-tiaGIi .grvsc-tiaGIi-13 { color: #073642; }
  html[colour-theme=light] .grvsc-ps-tiaGIi .grvsc-tiaGIi-4 { color: #CB4B16; }
  html[colour-theme=light] .grvsc-ps-tiaGIi .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));
  }
  html[colour-theme=dark] .grvsc-ps-t6zo1R { background-color: #002B36; }
  html[colour-theme=dark] .grvsc-ps-t6zo1R .grvsc-t6zo1R-b { font-weight: bold; }
  html[colour-theme=dark] .grvsc-ps-t6zo1R .grvsc-t6zo1R-7 { color: #268BD2; }
  html[colour-theme=dark] .grvsc-ps-t6zo1R .grvsc-t6zo1R-1 { color: #93A1A1; }
  html[colour-theme=dark] .grvsc-ps-t6zo1R .grvsc-t6zo1R-6 { color: #D33682; }
  html[colour-theme=dark] .grvsc-ps-t6zo1R .grvsc-t6zo1R-12 { color: #2AA198; }
  html[colour-theme=dark] .grvsc-ps-t6zo1R .grvsc-t6zo1R-5 { color: #B58900; }
  html[colour-theme=dark] .grvsc-ps-t6zo1R .grvsc-t6zo1R-9 { color: #859900; }
  html[colour-theme=dark] .grvsc-ps-t6zo1R .grvsc-t6zo1R-4 { color: #CB4B16; }
  html[colour-theme=dark] .grvsc-ps-t6zo1R .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));
  }
</style></section></main><button class="dark-mode-button"><span><div class="circle-left"></div><div class="circle-right"></div><svg class="sun-button" viewBox="0,0,255.99431,255.99431" width="182px" height="182px"><g transform="translate(-24.31946,-24.31946) scale(1.19,1.19)"><g fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode:normal"><g transform="scale(5.33333,5.33333)"><path d="M23.97656,3.97852c-0.82766,0.01293 -1.48844,0.69381 -1.47656,1.52148v3c-0.00765,0.54095 0.27656,1.04412 0.74381,1.31683c0.46725,0.27271 1.04514,0.27271 1.51238,0c0.46725,-0.27271 0.75146,-0.77588 0.74381,-1.31683v-3c0.00582,-0.40562 -0.15288,-0.7963 -0.43991,-1.08296c-0.28703,-0.28666 -0.67792,-0.44486 -1.08353,-0.43852zM10.90234,9.4043c-0.61065,0.00015 -1.16026,0.37042 -1.38978,0.93629c-0.22952,0.56587 -0.09314,1.21439 0.34486,1.63988l2.12109,2.12109c0.58626,0.58626 1.53678,0.58626 2.12305,0c0.58626,-0.58626 0.58626,-1.53678 0,-2.12305l-2.12109,-2.12109c-0.28328,-0.29067 -0.67225,-0.45415 -1.07812,-0.45312zM37.05078,9.4043c-0.38956,0.01135 -0.75941,0.17386 -1.03125,0.45313l-2.12109,2.12109c-0.58626,0.58626 -0.58626,1.53678 0,2.12305c0.58626,0.58626 1.53678,0.58626 2.12305,0l2.12109,-2.12109c0.44468,-0.43137 0.57845,-1.09172 0.33671,-1.66214c-0.24175,-0.57042 -0.80928,-0.93356 -1.4285,-0.91403zM24,13c-6.05737,0 -11,4.94264 -11,11c0,6.05736 4.94263,11 11,11c6.05737,0 11,-4.94264 11,-11c0,-6.05736 -4.94263,-11 -11,-11zM24,16c4.43605,0 8,3.56395 8,8c0,4.43605 -3.56395,8 -8,8c-4.43605,0 -8,-3.56395 -8,-8c0,-4.43605 3.56395,-8 8,-8zM5.5,22.5c-0.54095,-0.00765 -1.04412,0.27656 -1.31683,0.74381c-0.27271,0.46725 -0.27271,1.04514 0,1.51238c0.27271,0.46725 0.77588,0.75146 1.31683,0.74381h3c0.54095,0.00765 1.04412,-0.27656 1.31683,-0.74381c0.27271,-0.46725 0.27271,-1.04514 0,-1.51238c-0.27271,-0.46725 -0.77588,-0.75146 -1.31683,-0.74381zM39.5,22.5c-0.54095,-0.00765 -1.04412,0.27656 -1.31683,0.74381c-0.27271,0.46725 -0.27271,1.04514 0,1.51238c0.27271,0.46725 0.77588,0.75146 1.31683,0.74381h3c0.54095,0.00765 1.04412,-0.27656 1.31683,-0.74381c0.27271,-0.46725 0.27271,-1.04514 0,-1.51238c-0.27271,-0.46725 -0.77588,-0.75146 -1.31683,-0.74381zM13.00977,33.44531c-0.38956,0.01135 -0.75941,0.17386 -1.03125,0.45313l-2.12109,2.12109c-0.37938,0.37922 -0.5276,0.93205 -0.3888,1.45019c0.1388,0.51814 0.54351,0.92286 1.06165,1.06165c0.51814,0.1388 1.07097,-0.00942 1.45019,-0.3888l2.12109,-2.12109c0.44468,-0.43137 0.57845,-1.09172 0.33671,-1.66214c-0.24175,-0.57042 -0.80928,-0.93356 -1.4285,-0.91403zM34.94336,33.44531c-0.61064,0.00015 -1.16026,0.37042 -1.38978,0.93629c-0.22952,0.56587 -0.09314,1.21439 0.34486,1.63988l2.12109,2.12109c0.58626,0.58626 1.53678,0.58626 2.12305,0c0.58626,-0.58626 0.58626,-1.53678 0,-2.12305l-2.12109,-2.12109c-0.28328,-0.29067 -0.67225,-0.45415 -1.07812,-0.45313zM23.97656,37.97852c-0.82766,0.01293 -1.48843,0.69381 -1.47656,1.52148v3c-0.00765,0.54095 0.27656,1.04412 0.74381,1.31683c0.46725,0.27271 1.04514,0.27271 1.51238,0c0.46725,-0.27271 0.75146,-0.77588 0.74381,-1.31683v-3c0.00582,-0.40562 -0.15288,-0.7963 -0.43991,-1.08296c-0.28703,-0.28666 -0.67792,-0.44486 -1.08353,-0.43852z"></path></g></g></g></svg><svg class="moon-button" width="182" height="182" viewBox="0 0 182 182" fill="none"><path d="M172 119.337C156.715 125.484 139.96 127.002 123.819 123.705C107.677 120.407 92.8608 112.438 81.2113 100.789C69.5619 89.1392 61.593 74.3228 58.2953 58.1814C54.9976 42.0399 56.5165 25.2853 62.6632 10C44.5622 17.291 29.5611 30.6514 20.2315 47.7909C10.9018 64.9304 7.82475 84.7814 11.5277 103.941C15.2307 123.101 25.4831 140.376 40.5274 152.804C55.5717 165.233 74.4708 172.042 93.985 172.063C110.766 172.063 127.163 167.042 141.066 157.646C154.969 148.249 165.743 134.907 172 119.337Z" stroke="#0" stroke-width="10.6773" stroke-linecap="round" stroke-linejoin="round"></path></svg></span></button><footer><a href="https://github.com/james-door"><svg width="98" height="98" viewBox="0 0 98 98"><path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"></path></svg></a><a href="mailto:james.wood0042@gmail.com"><svg fill="#000000" width="50px" height="50px" viewBox="0 0 20 20" version="1.1" id="svg4"><defs id="defs8"></defs><path d="m 10,0.4 c -5.302,0 -9.6,4.298 -9.6,9.6 0,5.302 4.298,9.6 9.6,9.6 5.302,0 9.6,-4.298 9.6,-9.6 C 19.6,4.698 15.302,0.4 10,0.4 Z M 4.4884328,5.3511185 H 15.485245 c 0.583474,0 0.282231,0.7934091 -0.03509,0.9964102 -0.317329,0.2014516 -4.708741,3.0171248 -4.873986,3.1209488 -0.165245,0.103827 -0.375822,0.154962 -0.5893237,0.154962 -0.2054492,0.0044 -0.4083254,-0.04902 -0.5878614,-0.154962 L 4.5235289,6.3475287 C 4.2062008,6.1445276 3.9064207,5.3511185 4.4884328,5.3511185 Z M 15.849368,13.874066 c 0,0.325423 -0.36851,0.774816 -0.649281,0.774816 H 4.7999117 c -0.2807697,0 -0.6492799,-0.449393 -0.6492799,-0.774816 V 8.2225776 c 0,-0.1425658 -0.00293,-0.3269714 0.2515227,-0.1704591 l 4.9968227,3.1224975 c 0.1763511,0.114239 0.3815551,0.168334 0.5878615,0.154963 0.2135013,0 0.3685103,-0.01704 0.5893233,-0.154963 l 5.021683,-3.1209478 c 0.254448,-0.158062 0.251523,0.027893 0.251523,0.1704589 z" id="path356"></path></svg></a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/projects/window/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-6ef29ddbed6eed665014.js\"],\"component---src-pages-404-js\":[\"/component---src-pages-404-js-17e3b6e61a40136a79ae.js\"],\"component---src-pages-index-js\":[\"/component---src-pages-index-js-bab8b93d7209f0c8d09e.js\"],\"component---src-templates-project-page-template-js\":[\"/component---src-templates-project-page-template-js-3cd7b6cf3402bd0e5209.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="5db1102f2bd7b3a0ec95";</script><script src="/cv/webpack-runtime-fa60076f571e5e8c4e50.js" async></script><script src="/cv/framework-e1920fffb1cf79c01553.js" async></script><script src="/cv/app-6ef29ddbed6eed665014.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>